<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Password Generator</title>
    <style>
        .dial {
            display: flex;
            align-items: center;
            margin: 5px 0;
        }
        .dial input {
            width: 50px;
            text-align: center;
            margin: 0 5px;
        }
        nav {
            background-color: #333;
            padding: 10px;
            text-align: center;
        }
        nav a {
            color: white;
            text-decoration: none;
            margin: 0 15px;
            font-size: 1.2em;
        }
        nav a:hover {
            text-decoration: underline;
        }
    </style>
</head>
<body>
    <nav>
        <a href="index.html">Mobs</a>
        <a href="items.min.html">Items</a>
        <a href="calculator.min.html">Energy Calculator</a>
        <a href="vaultcrackers.html">Vault Code Generator</a>
    </nav>
    <h1>Password Generator</h1>

    <label for="dials">Number of Required Digits (Dials):</label>
    <input id="dials" type="number" min="1" max="10" value="6">
    <button id="createDials">Set Dials</button>

    <div id="requiredDigitsContainer"></div>

    <label for="digits">Total Code Length:</label>
    <input id="digits" type="number" min="1" max="10" value="8">

    <label for="startIndex">Start Index:</label>
    <input id="startIndex" type="number" min="0" value="0">

    <label for="codeCount">Number of Codes:</label>
    <input id="codeCount" type="number" min="1" value="50">

    <button id="generate">Generate Codes</button>

    <h2>Generated Codes</h2>
    <textarea id="output" rows="10" cols="50" readonly></textarea>
    <br>
    <button id="copy">Copy to Clipboard</button>

    <script>
        document.getElementById("createDials").addEventListener("click", createDials);
        document.getElementById("generate").addEventListener("click", generateCodes);
        document.getElementById("copy").addEventListener("click", copyToClipboard);

        function createDials() {
            const dialsCount = parseInt(document.getElementById("dials").value);
            const container = document.getElementById("requiredDigitsContainer");
            container.innerHTML = ""; // Clear existing dials

            for (let i = 0; i < dialsCount; i++) {
                const dial = document.createElement("div");
                dial.className = "dial";

                const label = document.createElement("span");
                label.textContent = `Dial ${i + 1}: `;

                const input = document.createElement("input");
                input.type = "number";
                input.min = "0";
                input.max = "9";
                input.value = "0";

                const upButton = document.createElement("button");
                upButton.textContent = "▲";
                upButton.onclick = () => {
                    if (input.value < 9) input.value = parseInt(input.value) + 1;
                };

                const downButton = document.createElement("button");
                downButton.textContent = "▼";
                downButton.onclick = () => {
                    if (input.value > 0) input.value = parseInt(input.value) - 1;
                };

                dial.appendChild(label);
                dial.appendChild(downButton);
                dial.appendChild(input);
                dial.appendChild(upButton);

                container.appendChild(dial);
            }
        }

        function generateCodes() {
            const dialsCount = parseInt(document.getElementById("dials").value);
            const digits = parseInt(document.getElementById("digits").value);
            const startIndex = parseInt(document.getElementById("startIndex").value);
            const codeCount = parseInt(document.getElementById("codeCount").value);

            const requiredDigits = Array.from(document.querySelectorAll("#requiredDigitsContainer input"))
                .map(input => input.value);

            if (requiredDigits.length !== dialsCount) {
                alert("Number of required digits must match the number of dials.");
                return;
            }

            // Generate all valid codes
            const allCodes = generateAllCodes(digits, requiredDigits);

            // Extract the subset
            const selectedCodes = allCodes.slice(startIndex, startIndex + codeCount);

            // Output to the textarea
            document.getElementById("output").value = selectedCodes.join("\n");
        }

        function generateAllCodes(length, requiredDigits) {
            const allDigits = Array.from({ length: 10 }, (_, i) => i.toString());

            const combinations = [];
            function backtrack(path, usedRequired) {
                if (path.length === length) {
                    if (usedRequired.size === requiredDigits.length) {
                        combinations.push(path.join(""));
                    }
                    return;
                }

                for (const digit of allDigits) {
                    const isRequired = requiredDigits.includes(digit);
                    const nextUsedRequired = new Set(usedRequired);
                    if (isRequired) nextUsedRequired.add(digit);

                    path.push(digit);
                    backtrack(path, nextUsedRequired);
                    path.pop();
                }
            }

            backtrack([], new Set());
            return combinations;
        }

        function copyToClipboard() {
            const output = document.getElementById("output");
            output.select();
            document.execCommand("copy");
            alert("Codes copied to clipboard!");
        }
    </script>
</body>
</html>
