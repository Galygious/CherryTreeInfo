<!-- File: index.html -->
<!DOCTYPE html>
<html>
<head>
  <meta charset="utf-8" />
  <title>God-Exclusive Drops: Defensive Checks for CSV Rows</title>
  <style>
    body {
      font-family: 'Arial', sans-serif;
      background-color: #121212;
      color: #FFFFFF;
      margin: 0;
      padding: 0;
    }

    h1 {
      text-align: center;
      margin-top: 20px;
      color: #FFFFFF;
    }

    #searchContainer {
      text-align: center;
      margin: 20px 0;
    }

    #searchInput {
      padding: 8px;
      font-size: 14px;
      border-radius: 4px;
      border: 1px solid #333;
      background-color: #1A1A1A;
      color: #FFFFFF;
      width: 250px;
    }

    table {
      width: 95%;
      margin: 20px auto;
      border-collapse: collapse;
      background-color: #1A1A1A;
      color: #FFFFFF;
      border-radius: 8px;
      overflow: hidden;
      box-shadow: 0 4px 6px rgba(0, 0, 0, 0.2);
    }

    th, td {
      padding: 12px;
      text-align: left;
      border: 1px solid #272727;
      vertical-align: middle;
    }

    thead th {
      background-color: #2C2C2C;
      font-weight: bold;
      cursor: pointer;
      border-bottom: 2px solid #3A3A3A;
    }

    tbody tr {
      border-bottom: 1px solid #272727;
    }

    tbody tr:last-child {
      border-bottom: none;
    }

    tbody tr:nth-child(odd) {
      background-color: #1A1A1A; /* Darker row background */
    }

    tbody tr:nth-child(even) {
      background-color: #1E1E1E; /* Lighter row background */
    }

    tbody tr:hover {
      background-color: #272727; /* Highlight on hover */
    }

    tr.subtable {
      display: none;
      background-color: #1E1E1E;
    }

    tr.subtable td {
      padding: 0;
    }

    .drop-table {
      width: 100%;
      border-collapse: collapse;
      background-color: #2C2C2C;
      margin-bottom: 20px;
    }

    .drop-table th, .drop-table td {
      padding: 8px;
      text-align: left;
      border: 1px solid #272727;
    }

    .drop-table th {
      background-color: #3A3A3A;
      font-weight: bold;
    }

    .clickable-row {
      cursor: pointer;
      background-color: #1A1A1A;
    }

    .clickable-row:hover {
      background-color: #272727;
    }

    footer {
      text-align: center;
      padding: 10px;
      background-color: #1A1A1A;
      color: #A0A0A0;
      border-top: 2px solid #272727;
      margin-top: 20px;
    }
  </style>
</head>
<body>
  <h1>God-Exclusive Drops: Defensive CSV Parsing</h1>

  <div id="searchContainer">
    <input type="text" id="searchInput" placeholder="Search enemy name..." />
  </div>

  <table id="enemyTable">
    <thead>
      <tr>
        <th data-sort-col="0">Enemy Name</th>
        <th data-sort-col="1">Icon</th>
        <th data-sort-col="2">Health</th>
        <th data-sort-col="3">Attack</th>
        <th data-sort-col="4">Strength</th>
        <th data-sort-col="5">Defence</th>
        <th data-sort-col="6">Attack Speed</th>
        <th data-sort-col="7">Slayer Exp</th>
        <th data-sort-col="8">Weakness</th>
        <th data-sort-col="9">Slayer Lvl</th>
        <th data-sort-col="11">Area</th>
        <th data-sort-col="12">Scroll Drop %</th>
        <th data-sort-col="13">Kills</th>
      </tr>
    </thead>
    <tbody></tbody>
  </table>

  <script>
    /******************************************************
     * 1) GOD ARRAYS (Define extra drops for these enemies)
     ******************************************************/
    const allGods = [
      "Amaran",
      "Aurial",
      "Cognium",
      "Copina",
      "Feroxi",
      "Kynosian",
      "Noctyra",
      "Opulina"
    ];

    const allGodDrops = [
      [
        "Shield of Amaran", 
        "Ring of Life", 
        "Necklace of Defence", 
        "Necklace of Health", 
        "Queens Armour Fragment", 
        "Kings Armour Fragment", 
        "Invincibility Potion", 
        "Rock Skin Potion", 
        "Dragon Platter", 
        "Iridium Ore"
      ],
      [
        "Scythe of Aurial", 
        "Scythe of Demeter", 
        "Restoration Fragment 2", 
        "Magic Watering Can", 
        "Farm Chest", 
        "Farm Key", 
        "Wine", 
        "Eggplant", 
        "Fruit Salad", 
        "Lemon"
      ],
      [
        "Sword of Cognium", 
        "Ring of Speed", 
        "Ring Fragments", 
        "Sextant", 
        "Steel Bar", 
        "Cog", 
        "Iron Ore"
      ],
      [
        "Rod of Copina", 
        "Knife of Copina", 
        "Rabbits Foot", 
        "Eagles Nest", 
        "Book of Aroon", 
        "Stone Tablet", 
        "Ginkgo Log", 
        "Shark", 
        "Marlin", 
        "Chestnut Log", 
        "Large Fishing Net", 
        "Rhodium Ore"
      ],
      [
        "Shield of Feroxi", 
        "Gloves of Feroxi", 
        "Berserker Ring", 
        "Extreme Power Stone", 
        "Necklace of Strength", 
        "Kings Weapon Fragment", 
        "Queens Weapon Fragment", 
        "Ultimate Power Potion", 
        "Super Power Stone", 
        "Tooth Necklace", 
        "Super Power Potion", 
        "Power Potion"
      ],
      [
        "Quiver of Kynosian", 
        "Kynosian Boots", 
        "Kynosian Gloves", 
        "Kynosian Arrows", 
        "Elven Bow", 
        "Elven Arrows", 
        "Kings Bow", 
        "Kings Arrows", 
        "Queens Bow", 
        "Queens Arrows", 
        "Ginkgo Headless Arrows", 
        "Ginkgo Arrow Shafts"
      ],
      [
        "Mystic Staff", 
        "Death Princess Rune", 
        "Ancient Elven Book", 
        "Ring of Death", 
        "Book of Death", 
        "Soul Gem", 
        "Liquid Death Potion", 
        "Dragon Skull", 
        "Insta Kill Potion", 
        "Big Dragon Bones", 
        "Dragon Bones", 
        "Bones"
      ],
      [
        "Opulinas Robe Bottoms", 
        "Gold Coin", 
        "Gold Coin", 
        "Golden Touch Potion", 
        "Gold Coin", 
        "Golden Scarab", 
        "Pot of Gold", 
        "Treasure Map", 
        "Gold Coin", 
        "Gold Bar", 
        "Gold Feather", 
        "Gold Ore"
      ]
    ];

    const allGodDropAmounts = [
      ["1,1", "1,1", "1,1", "1,1", "4,5", "2,3", "1,3", "2,5", "15,25", "10,20"],
      ["1,1", "1,1", "1,1", "1,1", "2,3", "2,3", "15,20", "10,15", "15,20", "15,20"],
      ["1,1", "1,1", "1,2", "3,5", "15,20", "5,10", "20,30"],
      ["1,1", "1,1", "1,1", "2,3", "4,5", "4,5", "20,25", "40,50", "50,60", "25,40", "5,10", "15,25"],
      ["1,1", "1,1", "1,1", "1,2", "1,1", "2,3", "3,4", "2,5", "2,5", "3,5", "5,10", "10,15"],
      ["1,1", "1,1", "1,1", "2,5", "1,1", "5,10", "1,1", "15,20", "1,1", "20,30", "25,40", "40,60"],
      ["1,1", "1,1", "1,1", "1,1", "1,1", "1,1", "5,10", "5,10", "10,15", "15,20", "20,25", "30,40"],
      ["1,1", "100,100", "25,25", "2,5", "15,15", "5,10", "5,10", "5,10", "5,5", "15,20", "25,30", "30,40"]
    ];

    const allGodDropRates = [
      [1, 4, 14, 24, 144, 384, 984, 2984, 7984, 17984],
      [1, 3, 5, 13, 163, 313, 1313, 4313, 10313, 20313],
      [1, 4, 19, 519, 3019, 8019, 18019],
      [1, 2, 6, 106, 256, 406, 906, 1706, 4206, 8206, 14206, 24206],
      [1, 2, 5, 11, 17, 67, 187, 937, 1937, 3937, 8937, 18937],
      [1, 2, 3, 9, 24, 54, 204, 454, 954, 1704, 9204, 19204],
      [1, 3, 6, 11, 16, 22, 522, 1272, 2772, 5772, 10772, 20772],
      [1, 3, 7, 15, 31, 111, 411, 1011, 2011, 4511, 9511, 17511]
    ];

    /**********************************************************
     * 2) CSV DATA: Example that includes gods & normal mobs
     **********************************************************/
    const csvData = `
     Enemy Name,Enemy Icon,Enemy Health,Enemy Attack,Enemy Strength,Enemy Defence,Enemy Attack Speed,Enemy Slayer Exp,Enemy Weakness,Enemy Slayer Level,Enemy Drops,Enemy Area,Scroll Drop %,Kills
     Chicken,R.drawable.enemy_chicken_01,10,1,1,1,Slow,11,Melee,1,"Bones,1,1,Always/Feathers,1,3,Always/Egg,1,1,Uncommon/Drumstick,1,1,Rare/Thread,1,1,Common/Birds Nest,1,1,Uncommon/Common Key,1,1,Rare/Chicken Knife,1,1,Secret Rare",Farm,0.0006%,155340
     Crow,R.drawable.enemy_crow_01,20,5,4,5,Medium,12,Archery,1,"Bones,1,1,Always/Feathers,3,6,Always/Evergreen Arrow Shafts,5,10,Uncommon/Egg,1,1,Uncommon/Thread,1,3,Common/Coins,2,10,Uncommon/Birds Nest,1,2,Uncommon/Common Chest,1,1,Rare/Raw Shrimp,1,1,Uncommon",Farm,0.0007%,146789
     Rat,R.drawable.enemy_rat_01,30,5,10,8,Medium,13,Melee,1,"Bones,1,1,Always/Coins,1,5,Uncommon/Stone Arrowheads,5,10,Uncommon/Common Chest,1,1,Rare/Thread,2,5,Common/Raw Shrimp,1,1,Uncommon/Emerald,1,1,Super Rare",Farm,0.0007%,141593
     Sheep,R.drawable.enemy_sheep_01,50,10,15,15,Slow,15,Melee,1,"Bones,1,1,Always/Coins,5,10,Uncommon/Wool,1,1,Common/Akomeric,1,1,Rare/Common Chest,1,1,Rare/Thread,2,6,Common/Raw Snail,1,1,Uncommon/Raw Shrimp,1,1,Common",Farm,0.0008%,130082
     Goat,R.drawable.enemy_goat_01,75,10,25,15,Slow,16,Melee,1,"Bones,1,1,Always/Milk,1,1,Uncommon/Oak Arrow Shafts,15,30,Rare/Coins,5,10,Uncommon/Common Chest,1,1,Rare/Thread,5,10,Common/Raw Carp,1,1,Uncommon",Farm,0.0008%,122138
     Pig,R.drawable.enemy_pig_01,100,15,15,25,Medium,18,Melee,1,"Bones,1,1,Always/Bacon,1,1,Common/Coins,10,20,Uncommon/Common Chest,1,1,Rare/Raw Minnows,1,1,Uncommon/Emerald,1,1,Super Rare",Farm,0.0009%,115108
     Ox,R.drawable.enemy_ox_01,150,25,30,40,Slow,22,Melee,1,"Bones,1,1,Always/Milk,1,1,Common/Coins,20,40,Common/Hide,1,1,Common/Common Chest,1,1,Uncommon/Thread,10,15,Common/Raw Perch,1,1,Uncommon",Farm,0.0010%,99379
     Young Goblin,R.drawable.enemy_goblin_01,35,10,15,5,Medium,13,Archery,1,"Bones,1,1,Always/Coins,5,10,Common/Evergreen Bow,1,1,Rare/Akomeric,1,1,Uncommon/Bloodroot,1,1,Rare/Hyssop,1,1,Rare/Red Chest,1,1,Super Rare/Oak,1,3,Common",Abandoned Village,0.0007%,137932
     Goblin Grump,R.drawable.enemy_goblin_02,75,15,15,10,Medium,16,Melee,1,"Bones,1,1,Always/Coins,5,10,Common/Copper Arrowheads,5,10,Rare/Akomeric,1,1,Uncommon/Bloodroot,1,1,Rare/Hyssop,1,1,Rare/Hide,1,1,Common/Red Chest,1,1,Super Rare",Abandoned Village,0.0008%,124032
     Goblin Guard,R.drawable.enemy_goblin_03,135,25,20,35,Medium,21,Melee,1,"Bones,1,1,Always/Coins,10,15,Common/Oak Bow,1,1,Rare/Red Chest,1,1,Rare/Wood,1,1,Common/Iron Ore,1,1,Common/Bloodroot,1,1,Common/Akomeric,1,1,Common",Abandoned Village,0.0010%,103897
     Goblin Chief,R.drawable.enemy_goblin_04,225,45,60,50,Fast,29,Archery,1,"Bones,1,1,Always/Coins,20,30,Common/Red Chest,1,1,Rare/Goblin Cleaver,1,1,Legendary/Bloodroot,1,1,Common/Akomeric,1,1,Common/Hyssop,1,1,Common/Ancient Rod,1,1,Secret Rare",Abandoned Village,0.0012%,82052
     Jin,R.drawable.enemy_jin,375,70,65,70,VeryFast,39,Melee,1,"Bones,1,1,Always/Coins,50,100,Uncommon/Maple Bow,1,1,Rare/Red Chest,1,1,Uncommon/Raw Crab,1,1,Rare/Raw Lobster,1,1,Rare/Empty Vial,5,10,Common/Oak,3,5,Common/Cauldron,1,1,Secret Rare",Abandoned Village,0.0015%,65307
     Red Ghoul,R.drawable.enemy_red_ghoul_01,600,80,90,85,VeryFast,53,Archery,1,"Bones,1,1,Always/Coins,60,100,Uncommon/Red Chest,1,1,Uncommon/Raw Crab,1,1,Uncommon/Raw Lobster,1,1,Rare/Emerald,1,1,Super Rare",Abandoned Village,0.0020%,50956
     Grey Wolf,R.drawable.enemy_greywolf_02,90,35,50,40,Fast,21,Melee,1,"Bones,1,1,Always/Akomeric,1,1,Always/Hide,1,5,Uncommon/Leather,1,2,Rare/Iron Ore,1,1,Uncommon/Emerald,1,1,Super Rare",Caves,0.0010%,103897
     Cyclops,R.drawable.enemy_cyclop_01,150,60,75,70,Slow,28,Archery,1,"Bones,1,1,Always/Akomeric,1,1,Always/Maple Log,1,1,Uncommon/Bloodroot,1,1,Uncommon/Stone,1,3,Uncommon/Wood,2,5,Uncommon/Rope,1,3,Rare/Mithril Boots,1,1,Super Rare/Mithril Ore,1,5,Rare",Caves,0.0012%,84657
     Cave Demon,R.drawable.enemy_demon_06,300,75,65,60,Medium,35,Melee,1,"Bones,1,1,Always/Empty Vial,1,3,Common/Fir Bow,1,1,Rare/Nails,1,5,Uncommon/Bloodroot,1,1,Uncommon/Fishing Potion,1,1,Rare/Honey,1,1,Uncommon",Caves,0.0014%,71112
     Banshee,R.drawable.enemy_banshee,450,75,80,70,Fast,44,Archery,1,"Bones,1,1,Always/Empty Vial,1,3,Common/Strength Potion,1,1,Uncommon/Mithril Top,1,1,Super Rare/Mithril Greaves,1,1,Super Rare/Mithril Boots,1,1,Super Rare/Safflower,1,1,Rare",Caves,0.0017%,59480
     Cave Beast,R.drawable.enemy_beest_02,675,80,80,80,Fast,56,Melee,1,"Bones,1,1,Always/Tooth Necklace,1,1,Rare/Empty Vial,1,3,Common/Hyssop,1,1,Common/Safflower,1,1,Uncommon/Hide,1,10,Uncommon/Raw Catfish,1,5,Rare/Large Fishing Net,1,1,Super Rare/Fishing Net,3,5,Rare",Caves,0.0021%,48633
     Giant Cave Spider,R.drawable.enemy_spider_01,1000,90,95,85,VeryFast,74,Archery,1,"Bones,1,1,Always/Stone Tablet,1,1,Legendary/Hide,5,10,Uncommon/Thread,10,20,Uncommon/Leather,1,5,Rare/Rope,5,10,Super Rare/Wolfmint,1,1,Super Rare/Vissinel,1,1,Super Rare/Coins,200,500,Rare",Caves,0.0026%,38278
     Wild Dog,R.drawable.enemy_dog_01,180,50,65,55,Fast,28,Melee,1,"Bones,1,1,Always/Nefrit Chest,1,1,Super Rare/Nefrit Key,1,1,Super Rare/Iron Ore,1,5,Uncommon/Wood,1,3,Common/Emerald,1,1,Super Rare",GreatPlains,0.0012%,85107
     Crocodile,R.drawable.enemy_crocodile_01,360,65,70,50,Slow,37,Archery,1,"Bones,1,1,Always/Nefrit Chest,1,1,Super Rare/Nefrit Key,1,1,Super Rare/Cog,1,1,Common/Thread,5,10,Common/Hide,1,5,Uncommon/Fishing Net,1,3,Rare",GreatPlains,0.0015%,67797
     Lion,R.drawable.enemy_lion_01,570,70,75,60,Fast,49,Melee,1,"Bones,1,1,Always/Ram Skull,1,1,Super Rare/Fir Log,1,1,Uncommon/Nefrit Chest,1,1,Super Rare/Nefrit Key,1,1,Super Rare/Thread,5,10,Common/Yarn,1,5,Uncommon/Emerald,1,1,Rare",GreatPlains,0.0018%,54422
     Brown Bear,R.drawable.enemy_bear_01,750,80,90,85,Slow,60,Melee,1,"Bones,1,1,Always/Ram Skull,1,1,Super Rare/Honey,1,1,Common/Nefrit Chest,1,1,Rare/Nefrit Key,1,1,Rare/Coins,200,500,Rare/Pot of Gold,1,1,Rare/Thread,10,20,Uncommon/Yarn,5,10,Common",GreatPlains,0.0022%,45585
     Skeletal Bear,R.drawable.enemy_bear,1200,95,120,100,Slow,86,Melee,1,"Bones,1,1,Always/Gold Ring,1,1,Legendary/Rhodium Ore,1,1,Super Rare/Nefrit Chest,1,1,Uncommon/Nefrit Key,1,1,Uncommon/Coins,500,1000,Rare/Thread,20,50,Rare/Oak,5,10,Common",GreatPlains,0.0030%,33403
     Baby Red Dragon,R.drawable.enemy_dragon_10,999,120,120,120,Medium,68,Archery,1,"Dragon Bones,1,1,Always/Dragon Leather,1,1,Rare/Dragon Skull,1,1,Legendary/Crystal Chest,1,1,Super Rare/Dragon Ore,1,1,Super Rare/Dragon Scimitar,1,1,Super Rare/Coins,500,1000,Rare/Luck Potion,1,1,Uncommon",DragonIsland,0.0024%,41026
     Baby Blue Dragon,R.drawable.enemy_dragon_11,1000,150,150,130,Medium,82,Archery,1,"Dragon Bones,1,1,Always/Dragon Leather,1,1,Rare/Dragon Skull,1,1,Legendary/Crystal Key,1,1,Super Rare/Dragon Ore,1,1,Super Rare/Dragon Scimitar,1,1,Super Rare/Coins,500,1000,Rare/Luck Potion,1,1,Uncommon",DragonIsland,0.0029%,34935
     Undead Dragon,R.drawable.enemy_dragon_08,1600,180,220,140,Fast,117,Archery,1,"Dragon Bones,1,1,Always/Dragon Leather,1,1,Uncommon/Dragon Skull,1,1,Legendary/Crystal Chest,1,1,Super Rare/Dragon Ore,1,2,Super Rare/Dragon Scimitar,1,1,Super Rare/Coins,500,1000,Rare/Luck Potion,1,1,Uncommon",DragonIsland,0.0040%,25197
     Ancient Dragon,R.drawable.enemy_dragon_07,2800,200,280,300,Fast,192,Archery,1,"Dragon Bones,1,1,Always/Dragon Arrowheads,15,25,Rare/Dragon Leather,1,1,Uncommon/Dragon Skull,1,1,Legendary/Golden Necklace,1,1,Legendary/Crystal Key,1,1,Super Rare/Dragon Ore,1,2,Super Rare/Dragon Scimitar,1,1,Super Rare/Coins,1000,2500,Rare",DragonIsland,0.0063%,15874
     Green Dragon,R.drawable.enemy_dragon_04,4000,300,350,240,Fast,255,Archery,1,"Dragon Bones,1,1,Always/Dragon Leather,1,2,Uncommon/Dragon Skull,1,1,Legendary/Dragon Tail,1,1,Legendary/Golden Necklace,1,1,Legendary/Crystal Chest,1,1,Rare/Dragon Ore,1,2,Super Rare/Dragon Wing Battleaxe,1,1,Legendary/Dragon Scimitar,1,1,Super Rare/Coins,1000,2500,Rare",DragonIsland,0.0083%,12094
     Water Dragon,R.drawable.enemy_dragon_05,5200,350,350,300,VeryFast,320,Archery,1,"Dragon Bones,1,1,Always/Dragon Leather,1,2,Common/Dragon Skull,1,1,Legendary/Dragon Tail,1,1,Legendary/Golden Scarab,1,1,Legendary/Crystal Key,1,1,Rare/Dragon Ore,1,1,Rare/Trident of the Seas,1,1,Legendary/Dragon Wing Battleaxe,1,1,Super Rare/Dragon Scimitar,1,1,Super Rare/Coins,2500,5000,Rare",DragonIsland,0.0103%,9697
     King Dragon,R.drawable.enemy_dragon_01,8000,1000,450,450,VeryFast,475,Archery,1,"Big Dragon Bones,1,1,Always/Dragon Leather,2,5,Common/Dragon Skull,1,1,Legendary/Dragon Tail,1,1,Legendary/Golden Scarab,1,1,Legendary/Crystal Key,1,1,Rare/Dragon Ore,1,2,Rare/Dragon Wing Battleaxe,1,1,Super Rare/Dragon Scimitar,1,1,Rare/Coins,5000,10000,Rare/Kings Chest,1,1,Mythical/Kings Key,1,1,Mythical",DragonIsland,0.0152%,6598
     Dragon Queen,R.drawable.enemy_dragon_06,15000,999,750,2000,VeryFast,938,Archery,1,"Big Dragon Bones,1,2,Always/Dragon Leather,5,10,Common/Dragon Skull,1,1,Super Rare/Dragon Tail,1,1,Super Rare/Golden Scarab,1,1,Super Rare/Queens Chest,1,1,Mythical/Queens Key,1,1,Mythical/Dragon Ore,2,5,Rare/Dragon Scimitar,1,1,Rare/Coins,5000,10000,Rare",DragonIsland,0.0296%,3377
     Elite Chicken,R.drawable.enemy_chicken_01,10000,300,300,200,Fast,550,Melee,1,"Bones,5,5,Always/Coins,1000,2500,Always/Cedar Log,1,1,Rare/Feathers,10,30,Always/Egg,5,10,Uncommon/Chicken Knife,1,1,Legendary/Farm Chest,1,1,Legendary/Farmour Fragment,1,1,Legendary",EliteFarm,0.0175%,5715
     Elite Crow,R.drawable.enemy_crow_01,15000,500,1000,300,Fast,820,Archery,1,"Bones,5,5,Always/Coins,1500,2500,Always/Feathers,5,10,Always/Egg,1,3,Uncommon/Thread,5,10,Common/Birds Nest,2,5,Uncommon/Farm Key,1,1,Legendary/Dagger Fragment,1,1,Mythical",EliteFarm,0.0259%,3856
     Elite Rat,R.drawable.enemy_rat_01,20000,1000,450,200,Fast,1063,Melee,1,"Bones,5,5,Always/Coins,2000,3000,Always/Platinum Ore,1,1,Rare/Emerald,1,3,Rare/Farm Chest,1,1,Super Rare/Farmour Fragment,1,2,Legendary",EliteFarm,0.0335%,2984
     Elite Sheep,R.drawable.enemy_sheep_01,25000,600,600,1000,Fast,1340,Melee,1,"Bones,5,5,Always/Coins,2500,3000,Always/Wool,2,5,Common/Farm Key,1,1,Super Rare/Dagger Fragment,1,3,Mythical",EliteFarm,0.0422%,2371
     Elite Goat,R.drawable.enemy_goat_01,30000,750,750,600,VeryFast,1615,Melee,1,"Bones,5,5,Always/Coins,3000,4000,Always/Cedar Bow,1,1,Super Rare/Milk,2,5,Uncommon/Farm Chest,1,1,Rare/Farmour Fragment,1,3,Legendary",EliteFarm,0.0508%,1970
     Elite Pig,R.drawable.enemy_pig_01,50000,900,900,750,VeryFast,2638,Melee,1,"Bones,5,5,Always/Coins,3500,4500,Always/Bacon,2,5,Common/Farm Key,1,1,Rare/Dagger Fragment,2,5,Mythical",EliteFarm,0.0827%,1209
     Elite Ox,R.drawable.enemy_ox_01,75000,1200,1200,1000,VeryFast,3930,Melee,1,"Bones,5,5,Always/Coins,4000,5000,Always/Hide,2,5,Common/Ginkgo Bow,1,1,Legendary/Ginkgo Log,1,1,Uncommon/Farm Chest,1,2,Rare/Farm Key,1,2,Rare/Farmour Fragment,2,5,Legendary/Dagger Fragment,1,1,Legendary",EliteFarm,0.1231%,813
     Training Dummy,R.drawable.enemy_dummy_01,35,10,10,10,Slow,13,Melee,10,"Wood,1,1,Always/Hide,1,1,Uncommon/Redwood Log,1,1,Super Rare/Thread,1,3,Common/Common Key,1,1,Rare/Oak,1,3,Uncommon/Iron Ore,1,3,Uncommon",SlayerDungeon,0.0007%,137932
     Ghost,R.drawable.enemy_ghost_01,75,30,25,20,Medium,18,Melee,20,"Akomeric,1,1,Common/Mushroom,1,1,Common/Stone,1,5,Common/Common Key,1,1,Rare/Common Chest,1,1,Rare",SlayerDungeon,0.0009%,115943
     Phoenix,R.drawable.enemy_phoenix_01,100,50,60,50,Fast,31,Archery,30,"Bones,1,1,Always/Bloodroot,1,1,Common/Red Chest,1,1,Rare/Red Key,1,1,Rare/Thread,10,20,Common/Yarn,1,5,Common/Ruby,1,1,Rare/Gold Ore,1,1,Legendary/Sextant,1,1,Super Rare/Mystery Egg,1,1,Secret Rare",SlayerDungeon,0.0013%,78818
     Nightmare,R.drawable.enemy_nightmare_01,200,60,70,75,Fast,40,Archery,45,"Hyssop,1,1,Common/Red Key,1,1,Rare/Red Chest,1,1,Rare/Book of Aroon,1,1,Legendary/Thread,25,50,Rare/Hide,10,25,Uncommon/Iron Ore,1,3,Common",SlayerDungeon,0.0016%,63746
     Orc Captain,R.drawable.enemy_orc_05,600,70,80,75,Fast,51,Melee,60,"Bones,1,1,Always/Thread,10,25,Common/Sage Leaf,1,5,Common/Wood,10,20,Uncommon/Mithril Ore,5,10,Rare/Iron Ore,10,25,Rare/Barbarian Boots,1,1,Legendary/Barbarian Gloves,1,1,Legendary/Barbarian Top,1,1,Legendary/Barbarian Helm,1,1,Legendary/Barbarian Greaves,1,1,Legendary/Barbarian Cape,1,1,Legendary",SlayerDungeon,0.0019%,52288
     Cobra,R.drawable.enemy_snake_01,750,80,90,85,VeryFast,60,Melee,65,"Bones,1,1,Always/Safflower,1,1,Common/Sunburst Flower,1,1,Super Rare/Spiked Chest,1,1,Rare/Spiked Key,1,1,Rare/Hide,10,25,Uncommon/Mithril Ore,1,5,Rare/Iron Ore,10,25,Common/Yarn,5,10,Rare/Emerald,1,1,Rare",SlayerDungeon,0.0022%,45585
     Skeletal Hound,R.drawable.enemy_hound,1500,140,160,120,Fast,106,Melee,75,"Bones,1,1,Always/Sage Leaf,1,1,Common/Redwood Bow,1,1,Super Rare/Mithril Ore,5,10,Uncommon/Rope,5,10,Uncommon/Cog,1,1,Rare/Iron Ore,5,10,Common/Blue Silk,15,20,Super Rare",SlayerDungeon,0.0036%,27587
     Necromancer,R.drawable.enemy_skeleton_05,2500,200,250,200,Fast,168,Melee,85,"Bones,1,5,Always/Thread,10,15,Common/Vissinel,1,1,Common/Wood,10,20,Uncommon/Mithril Ore,5,10,Rare/Iron Ore,10,20,Rare/Necromancer Boots,1,1,Legendary/Necromancer Gloves,1,1,Legendary/Necromancer Top,1,1,Legendary/Necromancer Helm,1,1,Legendary/Necromancer Greaves,1,1,Legendary/Necromancer Cape,1,1,Legendary",SlayerDungeon,0.0056%,18019
     Fluffy,R.drawable.enemy_spider_03,5000,250,300,350,VeryFast,305,Archery,90,"Bones,1,1,Always/Wolfmint,1,1,Common/Ember Fern,1,1,Super Rare/Chestnut Log,1,1,Rare/Crystal Chest,1,2,Super Rare/Thread,25,50,Uncommon/Rope,10,15,Rare/Yarn,5,10,Rare/Gold Ring,1,1,Legendary/Iron Ore,10,20,Common",SlayerDungeon,0.0098%,10159
     Blue Devil,R.drawable.enemy_tentacle_01,8000,350,500,1000,Fast,473,Archery,95,"Bones,1,1,Always/Vissinel,1,1,Always/Crystal Key,1,1,Rare/Chestnut Bow,1,1,Super Rare/Stone Tablet,1,1,Legendary/Gold Ring,1,1,Legendary/Thread,50,100,Uncommon/Rope,15,20,Rare/Blue Thread,1,1,Common",SlayerDungeon,0.0151%,6631
     Ancient Tribal Leader,R.drawable.enemy_mask_01,12000,600,999,850,VeryFast,723,Melee,99,"Bones,5,5,Always/Vissinel,3,5,Always/Crystal Chest,1,3,Rare/Ancient Dagger,1,1,Mythical/Blue Thread,3,5,Common/Blue Silk,1,3,Uncommon/Coin Purse,1,1,Super Rare/Golden Necklace,1,1,Super Rare/Wine,3,5,Rare",SlayerDungeon,0.0229%,4369
     Dummy Queen,R.drawable.enemy_doll_01,50000,2000,999,850,VeryFast,2693,Melee,1,"Coins,100,200,Always/Queens Chest,1,1,Super Rare/Wood,10,20,Always/Hide,10,20,Uncommon/Thread,10,30,Common/Queens Armour Fragment,1,1,Legendary",RealmoftheKings,0.0845%,1185
     Scarab Queen,R.drawable.enemy_bug,75000,2400,1400,1000,VeryFast,4000,Archery,1,"Coins,150,250,Always/Queens Key,1,1,Super Rare/Golden Necklace,1,1,Super Rare/Wine,3,5,Rare/Queens Armour Fragment,1,2,Legendary/Golden Scarab,1,1,Super Rare",RealmoftheKings,0.1253%,799
     Spider Queen,R.drawable.enemy_spider_02,100000,3000,2000,1500,VeryFast,5335,Archery,1,"Coins,250,500,Always/Queens Chest,1,1,Rare/Golden Necklace,1,1,Super Rare/Wine,3,5,Rare/Wolfmint,1,1,Common/Ember Fern,1,1,Rare/Thread,50,100,Uncommon/Gold Ring,1,1,Legendary/Queens Armour Fragment,1,3,Legendary",RealmoftheKings,0.1670%,599
     Undead Dragon Queen,R.drawable.enemy_dragon_13,150000,3750,2400,1700,Insane,7903,Archery,1,"Coins,500,750,Always/Queens Key,1,1,Rare/Big Dragon Bones,2,3,Always/Dragon Leather,2,5,Common/Dragon Skull,1,1,Legendary/Dragon Tail,1,1,Legendary/Golden Scarab,1,1,Legendary/Queens Weapon Fragment,1,1,Legendary",RealmoftheKings,0.2473%,405
     Bone King,R.drawable.enemy_bone_beast,200000,5000,3600,2500,VeryFast,10565,Melee,1,"Sunburst Flower,1,1,Always/Coins,750,1000,Always/Kings Chest,1,1,Super Rare/Kings Armour Fragment,1,1,Legendary",RealmoftheKings,0.3305%,303
     Skeletal King,R.drawable.enemy_skeleton_04,250000,7500,4800,3800,VeryFast,13315,Melee,1,"Sunburst Flower,1,1,Always/Coins,1000,1500,Always/Kings Key,1,1,Super Rare/Kings Armour Fragment,1,2,Legendary",RealmoftheKings,0.4164%,241
     Living Armour King,R.drawable.enemy_living_armor_03,300000,10000,6000,5000,VeryFast,16060,Melee,1,"Ember Fern,1,1,Always/Coins,2000,3000,Always/Kings Chest,1,1,Rare/Kings Armour Fragment,1,3,Legendary",RealmoftheKings,0.5022%,200
     Orc King,R.drawable.enemy_orc_04,400000,15000,7200,8500,Insane,21545,Archery,1,"Ember Fern,1,1,Always/Coins,3000,5000,Always/Kings Key,1,1,Rare/Kings Weapon Fragment,1,1,Legendary",RealmoftheKings,0.6736%,149
     Elven Fairy,R.drawable.enemy_elvenfairy,100000,8000,6000,10000,Fast,6210,Archery,1,"Coins,8000,10000,Always/Elven Armour Fragment,1,1,Legendary/Blue Silk,5,10,Common/Compass,1,1,Rare/Treasure Map,1,1,Rare/Extreme Power Potion,1,1,Rare/Safflower,1,3,Uncommon/Dragon Tail,1,3,Legendary/Elven Crystal,1,1,Rare",ImmortalRealm,0.1944%,515
     Elven Warrior,R.drawable.enemy_elvenwarrior,150000,9000,8000,12000,Fast,8960,Archery,1,"Coins,10000,15000,Always/Elven Weapon Fragment,1,1,Legendary/Compass,1,3,Rare/Sunburst Flower,1,3,Uncommon/Dragon Skull,1,3,Legendary/Raw Ray,1,1,Common/Pirates Hat,1,1,Super Rare/Elven Crystal,1,3,Rare",ImmortalRealm,0.2803%,357
     Elven Archer,R.drawable.enemy_elvenarcher,300000,12000,10000,14000,VeryFast,16810,Melee,1,"Coins,15000,20000,Always/Elven Armour Fragment,1,1,Super Rare/Elven Arrows,1,1,Super Rare/Sunburst Flower,3,5,Uncommon/Crab,3,5,Common/Dragon Plate,15,20,Super Rare/Raw Shark,1,1,Common/Golden Scarab,1,3,Super Rare/Elven Crystal,1,1,Uncommon",ImmortalRealm,0.5256%,191
     Elven Mage,R.drawable.enemy_elvenmage,400000,15000,15000,16000,VeryFast,22310,Archery,1,"Coins,20000,25000,Always/Elven Weapon Fragment,1,1,Super Rare/Sunburst Flower,5,10,Uncommon/Dragon Leather,15,20,Super Rare/Raw Octopus,1,1,Common/Dragon Ore,1,3,Super Rare/Dragon Platter,1,1,Rare/Elven Crystal,1,3,Uncommon",ImmortalRealm,0.6975%,144
     Elven King,R.drawable.enemy_elvenking,600000,24000,25000,18000,Insane,33360,Melee,1,"Coins,30000,50000,Always/Elven Armour Fragment,1,2,Uncommon/Ember Fern,3,5,Uncommon/Dragon Tail,5,10,Legendary/Dragon Ore,3,5,Super Rare/Golden Scarab,3,5,Super Rare/Dragon Platter,3,5,Rare/Elven Crystal,1,1,Common",ImmortalRealm,1.0428%,96
     Elven Queen,R.drawable.enemy_elvenqueen,750000,30000,40000,25000,Insane,42260,Melee,1,"Coins,50000,100000,Always/Elven Weapon Fragment,1,2,Uncommon/Ember Fern,15,20,Uncommon/Dragon Skull,5,10,Legendary/Queens Weapon Fragment,1,1,Super Rare/Queens Armour Fragment,1,1,Super Rare/Dragon Platter,5,10,Uncommon/Elven Crystal,1,3,Common",ImmortalRealm,1.3209%,76
     Amaran,R.drawable.enemy_amaran,7000000,70000,300000,67500,VeryFast,371885,None,1,"Gold Coin,5,10,Always",KingdomoftheGods,11.6217%,9
     Aurial,R.drawable.enemy_aurial,4000000,60000,225000,36000,Fast,216060,None,130,"Gold Coin,5,10,Always",KingdomoftheGods,6.7522%,15
     Cognium,R.drawable.enemy_cognium,8000000,80000,450000,54000,Insane,329210,None,130,"Gold Coin,5,10,Always",KingdomoftheGods,10.2881%,10
     Copina,R.drawable.enemy_copina,9000000,60000,225000,40500,Fast,266285,None,130,"Gold Coin,5,10,Always",KingdomoftheGods,8.3217%,13
     Feroxi,R.drawable.enemy_feroxi,6500000,90000,562500,63000,VeryFast,360785,None,130,"Gold Coin,5,10,Always",KingdomoftheGods,11.2748%,9
     Kynosian,R.drawable.enemy_kynosian,9000000,80000,525000,36000,Insane,282060,None,130,"Gold Coin,5,10,Always",KingdomoftheGods,8.8147%,12
     Noctyra,R.drawable.enemy_noctyra,8000000,100000,562500,67500,Insane,336510,None,130,"Gold Coin,5,10,Always",KingdomoftheGods,10.1788%,10
     Opulina,R.drawable.enemy_opulina,4500000,70000,262500,45000,Fast,243885,None,130,"Gold Coin,5,10,Always",KingdomoftheGods,7.6217%,14
    `.trim();

    // Special Drops
    const specialDrops = [
      {
        item: "Mystic Hat",
        droppedBy: "Pig",
        dropRate: "1/15,000",
      },
      {
        item: "Super Power Stone",
        droppedBy: "Ghost",
        dropRate: "1/10,000",
      },
      {
        item: "Ring of Speed",
        droppedBy: "Orc King",
        dropRate: "1/15,000",
      },
      {
        item: "Ring of Life",
        droppedBy: "Elite Pig",
        dropRate: "1/25,000",
      },
      {
        item: "Hatchet of the Gods",
        droppedBy: "Sheep",
        alternativeObtaining: "Treasure Chests: Eagles Nest",
        dropRate: "1/11,133",
      },
      {
        item: "Magic Watering Can",
        droppedBy: "Elite Chicken",
        dropRate: "1/125,000",
        specialCondition: "Full Leather Armor Equipped",
      },
      {
        item: "Necklace of Restoration – Fragment 1",
        droppedBy: "Water Dragon",
        dropRate: "1/25,000",
      },
      {
        item: "Book of Death",
        droppedBy: "Elven Archer",
        dropRate: "1/40,000",
      },
      {
        item: "Book of Necromancy",
        droppedBy: "Elven King",
        dropRate: "1/150,000",
      },
      {
        item: "Ancient Elven Book",
        droppedBy: "Elven Queen",
        dropRate: "1/125,000",
      },
      {
        item: "Ring of Souls",
        droppedBy: "Elven Queen",
        dropRate: "1/250,000",
        specialCondition: "During a Slayer Task",
      },
      {
        item: "Blessed Sacrifice",
        droppedBy: "Living Armour King",
        dropRate: "1/60,000",
      },
    ];

    let currentData = [];
    let sortDirections = {};

    /*********************************************************
     * 3) MAIN SETUP: Parse CSV, init sorting/search, render
     *********************************************************/
    document.addEventListener('DOMContentLoaded', () => {
      const { data } = parseCsv(csvData);
      currentData = data;
      initSorting();
      initSearch();
      populateTable(currentData);
    });

    /*****************************************
     * parseCsv: Splits lines, ignoring header
     *****************************************/
    function parseCsv(csvString) {
      const lines = csvString.split('\n');
      const dataRows = lines.slice(1); // skip header
      const data = dataRows.map(line => splitByCsvRules(line));
      return { data };
    }

    /****************************************************
     * splitByCsvRules: Basic CSV parse respecting quotes
     ****************************************************/
    function splitByCsvRules(line) {
      const result = [];
      let current = '';
      let inQuotes = false;
      for (let i = 0; i < line.length; i++) {
        const char = line[i];
        if (char === '"') {
          inQuotes = !inQuotes;
        } else if (char === ',' && !inQuotes) {
          result.push(current.trim());
          current = '';
        } else {
          current += char;
        }
      }
      result.push(current.trim());
      return result;
    }

    /*********************************************************
     * 4) populateTable: Renders each row + subtable row
     *********************************************************/
    function populateTable(dataArray) {
      const tbody = document.querySelector('#enemyTable tbody');
      tbody.innerHTML = '';

      dataArray.forEach((row, idx) => {
        // Defensive check: we expect 14 columns
        if (row.length < 14) {
          console.warn(`Skipping row #${idx} due to insufficient columns:`, row);
          return; // skip
        }

        const [
          enemyName,
          enemyIcon,
          enemyHealth,
          enemyAttack,
          enemyStrength,
          enemyDefence,
          enemyAttackSpeed,
          enemySlayerExp,
          enemyWeakness,
          enemySlayerLevel,
          dropsString,
          enemyArea,
          scrollChance,
          kills
        ] = row;

        // Defensive fix: If `enemyIcon` is undefined, set a fallback
        const safeIcon = enemyIcon ? enemyIcon.replace('R.drawable.', '') : 'unknown_icon';

        // Build main row
        const mainRow = document.createElement('tr');
        mainRow.classList.add('clickable-row');
        mainRow.innerHTML = `
          <td>${enemyName || 'Unknown'}</td>
          <td><img src="drawable/${safeIcon}.png" width="64" height="64"/></td>
          <td>${enemyHealth || '0'}</td>
          <td>${enemyAttack || '0'}</td>
          <td>${enemyStrength || '0'}</td>
          <td>${enemyDefence || '0'}</td>
          <td>${enemyAttackSpeed || 'Unknown'}</td>
          <td>${enemySlayerExp || '0'}</td>
          <td>${enemyWeakness || 'None'}</td>
          <td>${enemySlayerLevel || '0'}</td>
          <td>${enemyArea || 'Unknown'}</td>
          <td>${scrollChance || '0%'}</td>
          <td>${kills || '0'}</td>
        `;

        // subtable row
        const subRow = document.createElement('tr');
        subRow.classList.add('subtable');
        const subCell = document.createElement('td');
        subCell.colSpan = 13;

        // Normal CSV drops table
        const dropTable = document.createElement('table');
        dropTable.className = 'drop-table';
        dropTable.innerHTML = `
          <thead>
            <tr>
              <th>Drop Name</th>
              <th>Min Qty</th>
              <th>Max Qty</th>
              <th>Drop Class</th>
              <th>Rate (X in Total)</th>
              <th>Rate (~Percent)</th>
            </tr>
          </thead>
          <tbody></tbody>
        `;
        const dropBody = dropTable.querySelector('tbody');

        const parsedDrops = parseDrops(dropsString || '');

        // Convert each normal drop into an object with a computed "chance" so we can sort
        let dropObjects = [];
        parsedDrops.forEach((arr) => {
          const [dropName, minQty, maxQty, dropClass] = arr;
          const decimalOdds = dropClassLabels[dropClass] || 0;
          const isAlways = dropClass === 'Always';

          // If dropClass is e.g. "Common" => decimalOdds = 2.681 => 1 in 2.681 => ~ 37.3%
          // We'll store chance as a decimal from 0 to 1. "Always" = 1.0
          const chanceNum = isAlways ? 1.0 : decimalOdds > 0 ? (1 / decimalOdds) : 0;

          dropObjects.push({
            dropName,
            minQty,
            maxQty,
            dropClass,
            decimalOdds,
            chanceNum, // used for sorting descending
          });
        });

        // Sort by chanceNum descending (Always at top, then biggest chance to smallest)
        dropObjects.sort((a, b) => b.chanceNum - a.chanceNum);

        // Now populate the table rows in sorted order
        dropObjects.forEach((dObj, index) => {
          const rowEl = dropBody.insertRow();
          rowEl.className = index % 2 === 0 ? 'row-even' : 'row-odd';

          const fractionOdds = toMixedFraction(dObj.decimalOdds);
          const percentOdds = dObj.dropClass === 'Always'
            ? ''
            : `${(dObj.chanceNum * 100).toFixed(4)}%`;

          rowEl.innerHTML = `
            <td>${dObj.dropName}</td>
            <td>${dObj.minQty || 1}</td>
            <td>${dObj.maxQty || 1}</td>
            <td>${dObj.dropClass}</td>
            <td>${dObj.dropClass === 'Always' ? '1/1' : `1 in ${fractionOdds}`}</td>
            <td>${dObj.dropClass === 'Always' ? '100%' : `${percentOdds}`}</td>
          `;
        });
        subCell.appendChild(dropTable);

        // Check if it's a god => add second (god) table
        const godIndex = allGods.indexOf((enemyName || '').trim());
        if (godIndex !== -1) {
          const godTable = document.createElement('table');
          godTable.className = 'drop-table';
          godTable.innerHTML = `
            <thead>
              <tr>
                <th>Drop Name</th>
                <th>Min Qty</th>
                <th>Max Qty</th>
                <th>Rate (X in Total)</th>
                <th>Rate (~Percent)</th>
              </tr>
            </thead>
            <tbody></tbody>
          `;
          const godBody = godTable.querySelector('tbody');

          const theseDrops = allGodDrops[godIndex] || [];
          const theseAmounts = allGodDropAmounts[godIndex] || [];
          const theseRates = allGodDropRates[godIndex] || [];

          // We'll transform into objects for sorting
          let godObjects = [];
          const totalRate = theseRates.reduce((sum, rate) => sum + rate, 0);

          for (let i = 0; i < theseDrops.length; i++) {
            const [mnQ, mxQ] = (theseAmounts[i] || '1,1').split(',');
            const rateVal = theseRates[i] || 0;
            const percentChance = (rateVal / totalRate) * 100;

            godObjects.push({
              dropName: theseDrops[i],
              minQty: mnQ,
              maxQty: mxQ,
              rateVal,
              totalRate,
              percentChance
            });
          }

          // Sort by percentChance DESC
          godObjects.sort((a, b) => b.percentChance - a.percentChance);

          godObjects.forEach((gObj) => {
            const row2 = godBody.insertRow();
            row2.innerHTML = `
              <td>${gObj.dropName}</td>
              <td>${gObj.minQty}</td>
              <td>${gObj.maxQty}</td>
              <td>${gObj.rateVal} in ${gObj.totalRate}</td>
              <td>~${gObj.percentChance.toFixed(4)}%</td>
            `;
          });

          // Insert the God-exclusive table below the normal drop table
          dropTable.insertAdjacentElement('afterend', godTable);
        }

        //  *New* special-drops subtable:
        const relevantSpecialDrops = specialDrops.filter(sd => sd.droppedBy === (enemyName || '').trim());
        if (relevantSpecialDrops.length > 0) {
          const specialTable = document.createElement('table');
          specialTable.className = 'drop-table';
          specialTable.innerHTML = `
            <thead>
              <tr>
                <th>Special Drop</th>
                <th>Drop Rate</th>
                <th>Alternative Obtaining</th>
                <th>Special Condition</th>
              </tr>
            </thead>
            <tbody></tbody>
          `;
          const specialBody = specialTable.querySelector('tbody');

          relevantSpecialDrops.forEach(sd => {
            const row3 = specialBody.insertRow();
            row3.innerHTML = `
              <td>${sd.item}</td>
              <td>${sd.dropRate || '??'}</td>
              <td>${sd.alternativeObtaining || '-'}</td>
              <td>${sd.specialCondition || '-'}</td>
            `;
          });
          // Insert below the God table (or normal table)
          dropTable.insertAdjacentElement('afterend', specialTable);
        }

        subRow.appendChild(subCell);

        // Toggle subtable on click
        mainRow.addEventListener('click', () => {
          subRow.style.display = (subRow.style.display === 'table-row') ? 'none' : 'table-row';
        });

        tbody.appendChild(mainRow);
        tbody.appendChild(subRow);
      });
    }

    /***********************************************************
     * parseDrops: Split "dropsString" by '/' => each drop => ','
     ***********************************************************/
    function parseDrops(dropsString) {
      if (!dropsString) return [];
      let cleaned = dropsString.trim();
      if (cleaned.startsWith('"') && cleaned.endsWith('"')) {
        cleaned = cleaned.slice(1, -1);
      }
      if (!cleaned) return [];
      if (!cleaned.includes('/')) {
        return [cleaned.split(',').map(x=>x.trim())];
      }
      return cleaned.split('/').map(r => r.split(',').map(x=>x.trim()));
    }

    // We'll map known drop classes to approximate decimal odds
    const dropClassLabels = {
      "Common": 2.681,
      "Uncommon": 3.3333,
      "Rare": 16.6667,
      "Super Rare": 83.3333,
      "Legendary": 1250,
      "Mythical": 5000,
      "Secret Rare": 16666.6667
    };

    // A helper to convert decimalOdds => fraction for display
    function toMixedFraction(num) {
      //  e.g. 2.681 => "2.6810"
      //  or if close to 0.3333 => 1/3, etc.
      if (!num || num === 0) return '∞';
      if (num < 1) return num.toFixed(4); // below 1 => Just show decimal
      const whole = Math.floor(num);
      const frac = num - whole;
      // handle special fractions
      if (Math.abs(frac - 0.3333) < 0.01) {
        return `${whole} 1/3`;
      }
      if (Math.abs(frac - 0.6667) < 0.01) {
        return `${whole} 2/3`;
      }
      if (Math.abs(frac - 0.681) < 0.0001) {
        return `${whole} 5/8`;
      }
      return num.toFixed(0);
    }

    /**************************
     * 5) Sorting + Searching
     **************************/
    function initSorting() {
      const thElems = document.querySelectorAll('#enemyTable thead th[data-sort-col]');
      thElems.forEach(th => {
        th.addEventListener('click', () => {
          const colIndex = parseInt(th.getAttribute('data-sort-col'), 10);
          if (sortDirections[colIndex] === undefined) {
            sortDirections[colIndex] = true; // ascending by default
          } else {
            sortDirections[colIndex] = !sortDirections[colIndex];
          }
          sortData(colIndex, sortDirections[colIndex]);
        });
      });
    }

    function sortData(colIndex, ascending) {
      const numericCols = [2, 3, 4, 5, 7, 9, 12, 13];
      currentData.sort((a, b) => {
        if (a.length < 14 || b.length < 14) return 0; 
        let A = a[colIndex], B = b[colIndex];
        if (numericCols.includes(colIndex)) {
          if (colIndex === 12) {
            A = parseFloat(A.replace('%','')||'0');
            B = parseFloat(B.replace('%','')||'0');
          } else {
            A = parseFloat(A||'0');
            B = parseFloat(B||'0');
          }
          return ascending ? (A - B) : (B - A);
        } else {
          const cmp = (A||'').localeCompare(B||'');
          return ascending ? cmp : -cmp;
        }
      });
      populateTable(currentData);
    }

    function initSearch() {
      const input = document.getElementById('searchInput');
      input.addEventListener('input', () => {
        const val = input.value.toLowerCase();
        const filtered = currentData.filter(row => {
          if (row.length < 14) return false; // skip partial
          return row[0].toLowerCase().includes(val);
        });
        populateTable(filtered);
      });
    }
  </script>

  <footer>
    <p>Version 1.4.2</p>
  </footer>
</body>
</html>
